<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Upload</title>
    <script src="../js/HamburgerMenu.js"></script>
    <link rel="stylesheet" href="../css/upload.css" />
  </head>
  <body>
    <header>
      <div>
        <div id="mySidenav" class="sidenav">
          <a href="javascript:void(0)" class="closebtn" onclick="closeNav()"
            >&times;</a
          >
          <div style="margin-top: 200px;">
            <a href="../index.html">Home</a>
            <a href="../html/export.html">Export</a>
            <a href="../html/upload.html">Upload article</a>
            <a href="../html/adminPanel.html">Admin panel</a>
          </div>
        </div>
        <div>
          <img src="../assets/logo.svg" id="miniLogo" alt="" />
        </div>
        <div
          class="headerMenu"
          style="font-size: 30px; cursor: pointer;"
          onclick="openNav()"
        >
          <div class="hamburger"></div>
          <div class="hamburger"></div>
          <div class="hamburger"></div>
        </div>
      </div>
    </header>
    <section class="formCont">
      <form id="uplForm" enctype="multipart/form-data">
        <!-- <button class="btn">Upload a file</button> -->
        <input
          class="uplBut"
          type="file"
          name="image"
          id="image"
          onchange="document.getElementById('blah').src = window.URL.createObjectURL(this.files[0])"
        /><br />
        <input
          class="inpText"
          type="text"
          placeholder="Name"
          id="name"
          name="name"
          maxlength="16"
          required
        /><br />
        <input
          class="inpText"
          type="number"
          min="1600"
          max="2021"
          placeholder="Year"
          id="year"
          name="year"
          required
        /><br />
        <input
          class="inpText"
          type="text"
          placeholder="Brand"
          id="brand"
          name="brand"
          required
        /><br />
        <label for="alcoholic" class="checkLab">Is alcoholic: <input
          type="checkbox"
          id="alcoholic"
          name="alcoholic"
          class="checkInp"
          required
        /></label>
        <br />
        <input
          class="inpText"
          type="text"
          placeholder="Country"
          id="country"
          name="country"
          required
        /><br />
        <textarea
          class="inpText"
          placeholder="Description"
          id="description"
          name="description"
          rows="5"
          required
        ></textarea
        ><br />
        <label for="currState">Current State: </label>
        <select id="currState" name="currState" class="inpText">
          <option>Brand New</option>
          <option>Slighty Damaged</option>
          <option>Damaged</option>
        </select>
        <br />

        <label for="priceRange">Price range: </label>

        <select id="priceRange" name="priceRange" class="inpText">
          <option>50</option>
          <option>100-200</option>
          <option>200-500</option>
          <option>500-1000</option>
          <option>1.000-1.500</option>
          <option>1.500-2.000</option>
          <option>2.000-3.000</option>
          <option>3.000-5.000</option>
          <option>4.000-5.000</option>
          <option>Peste 5.000</option>
        </select>

        <label for="type">Type: </label>
        <select id="type" name="type" class="inpText">
          <option>Cap</option>
          <option>Etiquette</option>
          <option>Bottle</option>
        </select>

        <br /><br />
        
        <input class="inpSub" type="submit" id="inpsub"><br />
      </form>
      <img id="blah" src="#" alt="" /><br />
    </section>
    <script>
      window.addEventListener('load', function () {
        function sendForm () {
          var request = new XMLHttpRequest();
          request.onload = function () {
              console.log('we got response');
              console.log(request.responseText);
          };
          var fd = new FormData(form);
          request.open('POST', 'http://localhost:3000/articles', true);
          request.setRequestHeader("Access-Control-Expose-Headers", "Authorization");
          request.setRequestHeader("Content-type", "application/json");
          request.setRequestHeader('Authorization', localStorage.getItem('Authorization'));
          // var dataToSend = {'year': 2000};
          // console.log('dataToSend');
          request.send(fd);
        }
        const form = document.getElementById( "uplForm" );
        form.addEventListener( "submit", function ( event ) {
          event.preventDefault();
          console.log(event);
          sendForm();
        });
      });
    </script>
    <!-- <script src="../js/shrinkHeaderTitle.js"></script> -->
    <script src="../js/HamburgerMenu.js"></script>
  </body>
</html>
